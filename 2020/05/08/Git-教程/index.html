<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png?v=5.1.4">


  <link rel="mask-icon" href="/images/safari.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Git," />










<meta name="description" content="Git 参考廖雪峰Git教程 参考菜鸟Git教程 简介 Git 是一个开源的分布式版本控制系统，用于敏捷高效地处理任何或小或大的项目。是 Linus Torvalds 为了帮助管理 Linux 内核开发而开发的一个开放源码的版本控制软件  集中式vs分布式集中式是将版本集中存放在中央服务器，使用时需先联网从中央服务器中获取最新的版本。   分布式版本控制则没有中央服务器，每个人的电脑都是一个完整的">
<meta property="og:type" content="article">
<meta property="og:title" content="Git 教程">
<meta property="og:url" content="http://yoursite.com/2020/05/08/Git-%E6%95%99%E7%A8%8B/index.html">
<meta property="og:site_name" content="TaoTao&#39;s Blog">
<meta property="og:description" content="Git 参考廖雪峰Git教程 参考菜鸟Git教程 简介 Git 是一个开源的分布式版本控制系统，用于敏捷高效地处理任何或小或大的项目。是 Linus Torvalds 为了帮助管理 Linux 内核开发而开发的一个开放源码的版本控制软件  集中式vs分布式集中式是将版本集中存放在中央服务器，使用时需先联网从中央服务器中获取最新的版本。   分布式版本控制则没有中央服务器，每个人的电脑都是一个完整的">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://raw.githubusercontent.com/Guuhua/PicBed/master/imgdllwin10/image-20200508101224811.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Guuhua/PicBed/master/imgdllwin10/image-20200508101158205.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Guuhua/PicBed/master/imgdllwin10/image-20200506190011155.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Guuhua/PicBed/master/imgdllwin10/image-20200508102147923.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Guuhua/PicBed/master/imgdllwin10/image-20200506185651731.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Guuhua/PicBed/master/imgdllwin10/image-20200506184433323.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Guuhua/PicBed/master/imgdllwin10/image-20200506185609614.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Guuhua/PicBed/master/imgdllwin10/image-20200506190156336.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Guuhua/PicBed/master/imgdllwin10/image-20200506223750801.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Guuhua/PicBed/master/imgdllwin10/image-20200506224115248.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Guuhua/PicBed/master/imgdllwin10/image-20200506224431402.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Guuhua/PicBed/master/imgdllwin10/image-20200506224639518.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Guuhua/PicBed/master/imgdllwin10/image-20200506225219372.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Guuhua/PicBed/master/imgdllwin10/image-20200507135209915.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Guuhua/PicBed/master/imgdllwin10/image-20200507144532809.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Guuhua/PicBed/master/imgdllwin10/image-20200507150654708.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Guuhua/PicBed/master/imgdllwin10/image-20200507151311367.png">
<meta property="article:published_time" content="2020-05-08T14:48:37.000Z">
<meta property="article:modified_time" content="2020-05-08T14:49:47.480Z">
<meta property="article:author" content="Juntao">
<meta property="article:tag" content="Git">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/Guuhua/PicBed/master/imgdllwin10/image-20200508101224811.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2020/05/08/Git-教程/"/>





  <title>Git 教程 | TaoTao's Blog</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?c841235dfd558dbecf8818ba5ae80ea2";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




<meta name="generator" content="Hexo 4.2.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">TaoTao's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br />
            
            Sitemap
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            Commonweal 404
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/05/08/Git-%E6%95%99%E7%A8%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Juntao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://img0.imgtn.bdimg.com/it/u=2491561979,272135239&fm=11&gp=0.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="TaoTao's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Git 教程</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-05-08T22:48:37+08:00">
                2020-05-08
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2020/05/08/Git-%E6%95%99%E7%A8%8B/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2020/05/08/Git-%E6%95%99%E7%A8%8B/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2020/05/08/Git-%E6%95%99%E7%A8%8B/" class="leancloud_visitors" data-flag-title="Git 教程">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Visitors&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h3 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h3><hr>
<p><a href="https://www.liaoxuefeng.com/wiki/896043488029600" target="_blank" rel="noopener">参考廖雪峰Git教程</a></p>
<p><a href="https://www.runoob.com/git/git-tutorial.html" target="_blank" rel="noopener">参考菜鸟Git教程</a></p>
<h4 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h4><blockquote>
<p>Git 是一个开源的分布式版本控制系统，用于敏捷高效地处理任何或小或大的项目。是 Linus Torvalds 为了帮助管理 Linux 内核开发而开发的一个开放源码的版本控制软件</p>
</blockquote>
<h5 id="集中式vs分布式"><a href="#集中式vs分布式" class="headerlink" title="集中式vs分布式"></a>集中式vs分布式</h5><p>集中式是将版本集中存放在中央服务器，使用时需先联网从中央服务器中获取最新的版本。</p>
<img src="https://raw.githubusercontent.com/Guuhua/PicBed/master/imgdllwin10/image-20200508101224811.png" alt="image-20200508101224811" style="zoom:50%;" />

<p>分布式版本控制则没有中央服务器，每个人的电脑都是一个完整的版本库。</p>
<img src="https://raw.githubusercontent.com/Guuhua/PicBed/master/imgdllwin10/image-20200508101158205.png" alt="image-20200508101158205" style="zoom:50%;" />

<h4 id="安装Git"><a href="#安装Git" class="headerlink" title="安装Git"></a>安装Git</h4><h5 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// Debian/Ubuntu</span><br><span class="line">sudo apt-get install git</span><br><span class="line"></span><br><span class="line">// Centos/Redhat</span><br><span class="line"><span class="meta">$</span><span class="bash"> yum -y install git-core</span></span><br></pre></td></tr></table></figure>

<h5 id="Win"><a href="#Win" class="headerlink" title="Win"></a>Win</h5><p><a href="https://git-scm.com/downloads" target="_blank" rel="noopener">官网</a>下载安装</p>
<h5 id="用户信息"><a href="#用户信息" class="headerlink" title="用户信息"></a>用户信息</h5><p>安装完成后需要设置用户名和email，打开<code>Git bash</code>，在命令行中输入：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name <span class="string">"Your name"</span></span><br><span class="line">git config --global user.email <span class="string">"Your email"</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>注：<code>--global</code>参数，代表这台电脑上所有的Git仓库都会使用这个配置，当然也可以对某个仓库指定不同的用户名和email地址<br>如果要在某个特定的项目中使用其他名字或者电邮，只要去掉 –global 选项重新配置即可，新的设定保存在当前项目的 .git/config 文件里</p>
</blockquote>
<h5 id="文本编辑器"><a href="#文本编辑器" class="headerlink" title="文本编辑器"></a>文本编辑器</h5><p>设置Git默认使用的文本编辑器, 一般可能会是 Vi 或者 Vim。如果你有其他偏好，比如 Emacs 的话，可以重新设置：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global core.editor emacs</span><br></pre></td></tr></table></figure>

<h5 id="差异分析工具"><a href="#差异分析工具" class="headerlink" title="差异分析工具"></a>差异分析工具</h5><p>还有一个比较常用的是，在解决合并冲突时使用哪种差异分析工具。比如要改用 vimdiff 的话：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global merge.tool vimdiff</span><br></pre></td></tr></table></figure>

<p>Git 可以理解 kdiff3，tkdiff，meld，xxdiff，emerge，vimdiff，gvimdiff，ecmerge，和 opendiff 等合并工具的输出信息</p>
<h5 id="查看配置信息"><a href="#查看配置信息" class="headerlink" title="查看配置信息"></a>查看配置信息</h5><p>要检查已有的配置信息，可以使用 git config –list 命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git config --list</span><br><span class="line">http.postbuffer=2M</span><br><span class="line">user.name=runoob</span><br><span class="line">user.email=<span class="built_in">test</span>@runoob.com</span><br></pre></td></tr></table></figure>

<h4 id="创建版本库"><a href="#创建版本库" class="headerlink" title="创建版本库"></a>创建版本库</h4><blockquote>
<p>版本库（repository），可以简单理解成一个目录，这个目录里面的所有文件都可以被git管理，每个文件的修改、删除，Git都能跟踪，以便任何时刻都可以追踪历史遗迹还原。</p>
</blockquote>
<h5 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h5><ol>
<li><p>创建版本库，首先选择一个合适路径，在路径下开启git bash</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir demo</span><br><span class="line">$ <span class="built_in">cd</span> demo</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注：若使用win系统，为了避免问题，目录名尽量不包含中文</p>
</blockquote>
</li>
<li><p>通过 <code>git init &lt;project name&gt;</code> 命令可以把目录变成Git可以管理的版本库</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br><span class="line">Initialized empty Git repository <span class="keyword">in</span> XXX/demo/.git/</span><br></pre></td></tr></table></figure>

<p>仓库建好之后，会提示是一个empty Git repository，目录中会多出一个 <strong>.git</strong>的目录（隐藏目录），这是Git原来跟踪管理版本库的，不能随意修改。</p>
<blockquote>
<p>注：所有的版本控制系统，其实只能跟踪文本文件的改动，比如TXT、HTML、code文件等。版本控制系统可以告诉你每次的改动，比如在第几行增加或减少什么单词。而图片、视频这些二进制文件，没法跟踪文件的具体变化，只知道文件的大小发生了变化。</p>
<p>而word是二进制文件，所以Git是不能跟踪word文档的改动。首先文本是由编码的，中文常见的由GBK编码，建议使用标准的UTF-8编码，所有的语言统一使用UTF-8。所有的平台都能够支持。</p>
<p>Win系统不建议使用记事本来编辑任何文件，记事本保存UTF-8会在每个文件的开头添加0xefbbf（十六进制）的字符，会导致各种问题。建议使用<a href="https://notepad-plus-plus.org/" target="_blank" rel="noopener">Notepad++</a>，并将默认编码设置为UTF-8 without BOM。</p>
</blockquote>
</li>
<li><p>编写一个readme.txt文件（内容任意）必须放入demo目录下（根目录或子目录）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hello Git!</span><br></pre></td></tr></table></figure>
</li>
<li><p>将编写好的文件放入Git仓库</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git add readme.txt</span><br><span class="line"></span><br><span class="line">$ git commit -m <span class="string">"wrote a readme file"</span></span><br><span class="line">[master (root-commit) c4753e1] wrote a readme.txt file</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br><span class="line"> create mode 100644 readme.txt</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>git commit</code>: -m后面输入的是对本次提交的一个说明</p>
<p><code>git add A.XXX B.XXX ...</code> 可以一次提交多个文件，也可反复使添加文件，最后commit一次提交所有的文档</p>
<p>1 file changed: 一个文件被改动</p>
<p>1 insertion: 插入一行内容</p>
</blockquote>
</li>
<li><p>再次修改readme文档</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Hello Git!</span><br><span class="line">Let&#39;s do it!</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">"git restore &lt;file&gt;..."</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line">        modified:   readme.txt</span><br><span class="line"></span><br><span class="line">no changes added to commit (use <span class="string">"git add"</span> and/or <span class="string">"git commit -a"</span>)</span><br></pre></td></tr></table></figure>

<p>使用<code>git status</code> 可以掌握仓库当前的状态，上面的命令输出代表，readme被修改，但是还没有准备提交的修改，使用<code>git restore</code> 可以退回修改前的版本。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ git diff</span><br><span class="line">diff --git a/readme.txt b/readme.txt</span><br><span class="line">index fdc3d3c..6945b16 100644</span><br><span class="line">--- a/readme.txt</span><br><span class="line">+++ b/readme.txt</span><br><span class="line">@@ -1 +1,2 @@</span><br><span class="line">-Hello Git!</span><br><span class="line">\ No newline at end of file</span><br><span class="line">+Hello Git!</span><br><span class="line">+Let<span class="string">'s do it!</span></span><br><span class="line"><span class="string">\ No newline at end of file</span></span><br></pre></td></tr></table></figure>

<p>使用 <code>git diff</code> 可以查看修改前后的不同</p>
<p>对文档做出修改后，再提交给仓库，步骤与提交新文件一致。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git add readme.txt</span><br><span class="line"></span><br><span class="line">$ git commit -m <span class="string">"add sth"</span></span><br><span class="line">[master cd0ef31] add sth</span><br><span class="line"> 1 file changed, 2 insertions(+), 1 deletion(-)</span><br></pre></td></tr></table></figure>
</li>
<li><p>不断的修改文件，再不断的 add和 commit，而每commit一次仓库就会保存一个快照，丢失了文件可以以最近的一个commit进行恢复。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">log</span></span><br><span class="line">commit cd0ef3118ae70d8e950040e40a4a9d48e070b849 (HEAD -&gt; master)</span><br><span class="line">Author: Guhua &lt;ttscj_chen@foxmail.com&gt;</span><br><span class="line">Date:   Tue May 5 22:46:13 2020 +0800</span><br><span class="line"></span><br><span class="line">    add sth</span><br><span class="line"></span><br><span class="line">commit c4753e1cbac5832ae9a7da97f036fd61bbf27dff</span><br><span class="line">Author: Guhua &lt;ttscj_chen@foxmail.com&gt;</span><br><span class="line">Date:   Tue May 5 22:32:00 2020 +0800</span><br><span class="line"></span><br><span class="line">    wrote a readme.txt file</span><br><span class="line">    </span><br><span class="line">$ git <span class="built_in">log</span> --pretty=oneline</span><br><span class="line">cd0ef3118ae70d8e950040e40a4a9d48e070b849 (HEAD -&gt; master) add sth</span><br><span class="line">c4753e1cbac5832ae9a7da97f036fd61bbf27dff wrote a readme.txt file</span><br></pre></td></tr></table></figure>

<p>使用 <code>git log</code> 可以看到更改文件的历史纪录和时间.</p>
<p>后面添加参数 <code>--pretty=oneline</code>可以更加简洁的看历史变更。前面的一大串数字是commit id（版本号），是一个SHA1计算出来的，由十六进制表示。其中HEAD表示当前的版本，即最新的版本，再上一个版本就是<code>HEAD^</code>，上上个就是<code>HEAD^^</code>，也可以使用<code>HEAD~NUM</code>(NUM代表往上多少个版本)。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git reset --hard HEAD^</span><br><span class="line">bash: $: <span class="built_in">command</span> not found</span><br></pre></td></tr></table></figure>

<p>使用 <code>git reset</code> 回退版本。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">log</span></span><br><span class="line">commit c4753e1cbac5832ae9a7da97f036fd61bbf27dff (HEAD -&gt; master)</span><br><span class="line">Author: Guhua &lt;ttscj_chen@foxmail.com&gt;</span><br><span class="line">Date:   Tue May 5 22:32:00 2020 +0800</span><br><span class="line"></span><br><span class="line">    wrote a readme.txt file</span><br></pre></td></tr></table></figure>

<p>使用<code>git log</code>观察版本库的状态，可以发现add sth那个版本已经不见了。如果这时想回到add sth的版本可以往前找到其commit id</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git reset --hard cd0ef3118ae70d8e950040e40a4a9d48e070b849</span><br><span class="line">HEAD is now at cd0ef31 add sth</span><br></pre></td></tr></table></figure>

<blockquote>
<p>版本号没必要写全，前几位就行，Git会自动去寻找</p>
<p>Git的版本回退速度很快，是因为Git在内部有个指向当前版本的<code>HEAD</code>指针，当你回退回退版本的时候，Git仅仅是把<code>HEAD</code>指向了 add sth </p>
</blockquote>
<p>若找不到id可以使用<code>git reflog</code>，会记录你每次命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git reflog</span><br><span class="line">cd0ef31 (HEAD -&gt; master) HEAD@&#123;0&#125;: reset: moving to cd0ef3118ae70d8e950040e40a4a9d48e070b849</span><br><span class="line">c4753e1 HEAD@&#123;1&#125;: reset: moving to HEAD^</span><br><span class="line">cd0ef31 (HEAD -&gt; master) HEAD@&#123;2&#125;: commit: add sth</span><br><span class="line">c4753e1 HEAD@&#123;3&#125;: commit (initial): wrote a readme.txt file</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h5 id="工作区、暂存区和版本库"><a href="#工作区、暂存区和版本库" class="headerlink" title="工作区、暂存区和版本库"></a>工作区、暂存区和版本库</h5><blockquote>
<p>Git和其他版本控制系统如SVN的一个不同之处就是由暂存区的概念</p>
</blockquote>
<p><strong>工作区（working directory）</strong></p>
<p>就是当前目录，比如<code>demo</code>文件夹就是一个工作区</p>
<p><strong>版本库（repository）</strong></p>
<p>工作区有一个隐藏目录<code>.git</code>，这个不算是工作区，而是Git的版本库</p>
<h5 id="暂存区-（stage-index）"><a href="#暂存区-（stage-index）" class="headerlink" title="暂存区 （stage/index）"></a>暂存区 （stage/index）</h5><p>Git的版本库里存了很多东西，其中最重要的就是称为stage（或者叫index）的暂存区，还有Git自动创建的第一个分支<code>master</code>，以及指向<code>master</code>的一个指针<code>HEAD</code></p>
<p><img src="https://raw.githubusercontent.com/Guuhua/PicBed/master/imgdllwin10/image-20200506190011155.png" alt="image-20200506190011155"></p>
<img src="https://raw.githubusercontent.com/Guuhua/PicBed/master/imgdllwin10/image-20200508102147923.png" alt="image-20200508102147923" style="zoom:67%;" />

<p>将文件往Git版本库添加的时候，是分两部执行的：</p>
<ol>
<li><code>git add</code>：实际上就是把文件修改添加到暂存区</li>
<li><code>git commit</code>：提交更改，实际上就是把暂存区的所有内容提交到当前分支</li>
</ol>
<p>在我们创建Git版本库时，Git自动为我们创建了一个<code>master</code>分支，所以<code>git commit</code>就是往<code>master</code>分支上提交更改</p>
<p><strong>Q1：为什么Git比其他版本控制系统设计得优秀？</strong></p>
<blockquote>
<p>因为Git跟踪并管理的是修改，而非文件。具体情况我们来实验一下。</p>
</blockquote>
<p>第一步，对readme进行修改，加了两行内容。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ cat readme.txt</span><br><span class="line">Hello Git!</span><br><span class="line">Let<span class="string">'s do it!</span></span><br><span class="line"><span class="string">Git has a mutable index called stage.</span></span><br><span class="line"><span class="string">Git tracks changes of files.</span></span><br></pre></td></tr></table></figure>

<p>然后，添加readme</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git add readme.txt</span><br><span class="line"></span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">"git restore --staged &lt;file&gt;..."</span> to unstage)</span><br><span class="line">        modified:   readme.txt</span><br></pre></td></tr></table></figure>

<p>然后再次修改readme，并提交</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">$ cat readme.txt</span><br><span class="line">Hello Git!</span><br><span class="line">Let<span class="string">'s do it!</span></span><br><span class="line"><span class="string">Git has a mutable index called stage.</span></span><br><span class="line"><span class="string">Git tracks changes of files.</span></span><br><span class="line"><span class="string">Cool!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$ git commit -m readme.txt</span></span><br><span class="line"><span class="string">[master a090910] readme.txt</span></span><br><span class="line"><span class="string"> 1 file changed, 3 insertions(+), 1 deletion(-)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$ git status</span></span><br><span class="line"><span class="string">On branch master</span></span><br><span class="line"><span class="string">Changes not staged for commit:</span></span><br><span class="line"><span class="string">  (use "git add &lt;file&gt;..." to update what will be committed)</span></span><br><span class="line"><span class="string">  (use "git restore &lt;file&gt;..." to discard changes in working directory)</span></span><br><span class="line"><span class="string">        modified:   readme.txt</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">no changes added to commit (use "git add" and/or "git commit -a")</span></span><br></pre></td></tr></table></figure>

<p>可以看到第二次修改并没有被提交，是因为第二次修改并没有放入暂存区，而<code>git commit</code>只会将暂存区的修改提交到分支。提交后可以使用 <code>git diff HEAD -- readme.txt</code>查看工作区和版本库里面最新版本的区别。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ git diff HEAD -- readme.txt</span><br><span class="line">diff --git a/readme.txt b/readme.txt</span><br><span class="line">index 992123b..6ee0c52 100644</span><br><span class="line">--- a/readme.txt</span><br><span class="line">+++ b/readme.txt</span><br><span class="line">@@ -1,4 +1,5 @@</span><br><span class="line"> Hello Git!</span><br><span class="line"> Let<span class="string">'s do it!</span></span><br><span class="line"><span class="string"> Git has a mutable index called stage.</span></span><br><span class="line"><span class="string">-Git tracks changes of files.</span></span><br><span class="line"><span class="string">\ No newline at end of file</span></span><br><span class="line"><span class="string">+Git tracks changes of files.</span></span><br><span class="line"><span class="string">+Cool!</span></span><br><span class="line"><span class="string">\ No newline at end of file</span></span><br></pre></td></tr></table></figure>

<h5 id="还原文档"><a href="#还原文档" class="headerlink" title="还原文档"></a>还原文档</h5><p>在修改文档之后，发现有错误修改。但是<strong>还未提交</strong>，可以手动修改文档，也可以使用 <code>git restore</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ cat readme.txt</span><br><span class="line">Hello Git!</span><br><span class="line">Let<span class="string">'s do it!</span></span><br><span class="line"><span class="string">Git has a mutable index called stage.</span></span><br><span class="line"><span class="string">Git tracks changes of files.</span></span><br><span class="line"><span class="string">How can we restore the file?</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$ git status</span></span><br><span class="line"><span class="string">On branch master</span></span><br><span class="line"><span class="string">Changes not staged for commit:</span></span><br><span class="line"><span class="string">  (use "git add &lt;file&gt;..." to update what will be committed)</span></span><br><span class="line"><span class="string">  (use "git restore &lt;file&gt;..." to discard changes in working directory)</span></span><br><span class="line"><span class="string">        modified:   readme.txt</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">no changes added to commit (use "git add" and/or "git commit -a")</span></span><br></pre></td></tr></table></figure>

<p>可以看到 Git 提示使用 <code>git restore</code>可以丢弃工作区的更改</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git restore readme.txt</span><br><span class="line"></span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">nothing to commit, working tree clean</span><br></pre></td></tr></table></figure>

<p>但是如果我们已经将文件<strong>提交到暂存区</strong>怎么办呢？</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ cat readme.txt</span><br><span class="line">Hello Git!</span><br><span class="line">Let<span class="string">'s do it!</span></span><br><span class="line"><span class="string">Git has a mutable index called stage.</span></span><br><span class="line"><span class="string">Git tracks changes of files.</span></span><br><span class="line"><span class="string">How can we restore the file?</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$ git add readme.txt</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$ git status</span></span><br><span class="line"><span class="string">On branch master</span></span><br><span class="line"><span class="string">Changes to be committed:</span></span><br><span class="line"><span class="string">  (use "git restore --staged &lt;file&gt;..." to unstage)</span></span><br><span class="line"><span class="string">        modified:   readme.txt</span></span><br></pre></td></tr></table></figure>

<p>可以看到Git提示我们可以使用 <code>git restore --stage filename</code>去将文件unstage相当于取消提交的操作，将文件从暂存区中取出。而此时文件内容实质并未改变，再一次使用 <code>git restore</code>就可以恢复文件到最新的状态。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ git restore --stage readme.txt</span><br><span class="line"></span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">"git restore &lt;file&gt;..."</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line">        modified:   readme.txt</span><br><span class="line"></span><br><span class="line">no changes added to commit (use <span class="string">"git add"</span> and/or <span class="string">"git commit -a"</span>)</span><br><span class="line"></span><br><span class="line">$ cat readme.txt</span><br><span class="line">Hello Git!</span><br><span class="line">Let<span class="string">'s do it!</span></span><br><span class="line"><span class="string">Git has a mutable index called stage.</span></span><br><span class="line"><span class="string">Git tracks changes of files.</span></span><br><span class="line"><span class="string">How can we restore the file?</span></span><br></pre></td></tr></table></figure>

<p><strong>小结</strong></p>
<ol>
<li>修改文档之后想直接丢弃工作区文档的修改内容，可以使用<code>git restore</code></li>
<li>修改文档并提交到了暂存区，想丢弃修改，分为两步，第一步命令<code>git restore --stage &lt;file&gt;</code>，第二步命令如1一致</li>
<li>修改文档后并提交到了版本库，想要撤销本次提交，使用 <code>git reset --hard HEAD^</code></li>
</ol>
<h5 id="删除文档"><a href="#删除文档" class="headerlink" title="删除文档"></a>删除文档</h5><p>建立新文档并提交到版本库后，删除了该文档，使用 <code>git status</code>会告诉你哪些文档被删除了，有两个选择：一是从版本库中删除该文件，用 <code>git rm &lt;file&gt;</code>，并且 <code>git commit</code><br>二是从版本库中恢复该文件 <code>git restore &lt;file&gt;</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">$ touch test.txt</span><br><span class="line"></span><br><span class="line">$ git add test.txt</span><br><span class="line"></span><br><span class="line">$ git commit -m <span class="string">"add test.txt"</span></span><br><span class="line">[master 78fc447] add test.txt</span><br><span class="line"> 1 file changed, 0 insertions(+), 0 deletions(-)</span><br><span class="line"> create mode 100644 test.txt</span><br><span class="line"></span><br><span class="line">$ rm test.txt</span><br><span class="line"></span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">"git add/rm &lt;file&gt;..."</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">"git restore &lt;file&gt;..."</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line">        deleted:    test.txt</span><br><span class="line"></span><br><span class="line">no changes added to commit (use <span class="string">"git add"</span> and/or <span class="string">"git commit -a"</span>)</span><br><span class="line"></span><br><span class="line">$ git rm test.txt</span><br><span class="line">rm <span class="string">'test.txt'</span></span><br><span class="line"></span><br><span class="line">$ git commit -m <span class="string">"remove test.txt"</span></span><br><span class="line">[master 9341e91] remove test.txt</span><br><span class="line"> 1 file changed, 0 insertions(+), 0 deletions(-)</span><br><span class="line"> delete mode 100644 test.txt</span><br><span class="line"></span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">nothing to commit, working tree clean</span><br></pre></td></tr></table></figure>

<h4 id="远程仓库"><a href="#远程仓库" class="headerlink" title="远程仓库"></a>远程仓库</h4><p>这里使用Github作为远程仓库，先注册Github账号，需要配置SSH key。<a href="https://help.github.com/en/github/authenticating-to-github/connecting-to-github-with-ssh" target="_blank" rel="noopener">官方文档</a></p>
<h5 id="SSH-keys配置"><a href="#SSH-keys配置" class="headerlink" title="SSH keys配置"></a>SSH keys配置</h5><ol>
<li><p>检查电脑是否由SSH Key</p>
<p><code>~/.ssh</code> 或者 <code>~/.ssh ls</code> ，如果由就会返回 is a directory，没有就会返回 No such file…</p>
<p><img src="https://raw.githubusercontent.com/Guuhua/PicBed/master/imgdllwin10/image-20200506185651731.png" alt="image-20200506185651731"></p>
</li>
<li><p>如果没有就需要创建SSH key</p>
<p>在git bash中输入 <code>ssh-kengen -t rsa -C &quot;your email&quot;</code></p>
<p>会提示你输入文件名，一般不需要输入，直接回车，就会生成<code>id_rsa</code>和<code>id_rsa.pub</code>两个文件。<br>其中<code>id_rsa</code>是私钥 <code>id_rsa.pub</code>是公钥，私钥一般不能随意泄露，而公钥可以随意告诉任何人</p>
<p>之后会提示你输入密码，建议无须设置，直接回车。</p>
</li>
<li><p>添加SSH key到Github</p>
<p>打开GitHub网页在个人settings中找到SSH and GPG keys，点击New SSH key</p>
<p>Title随意取，文本框中复制<code>id_rsa.pub</code>中的内容</p>
</li>
<li><p>测试，在bash中输入 <code>ssh -T git@github.com</code>，第一次会提示你是否建立选择yes，成功之后会输出以下提示。</p>
<p><img src="https://raw.githubusercontent.com/Guuhua/PicBed/master/imgdllwin10/image-20200506184433323.png" alt="image-20200506184433323"> </p>
</li>
</ol>
<blockquote>
<p>为什么GitHub需要SSH Key呢？因为GitHub需要识别出你推送的提交确实是你推送的，而不是别人冒充的，而Git支持SSH协议，所以，GitHub只要知道了你的公钥，就可以确认只有你自己才能推送。</p>
<p>当然，GitHub允许你添加多个Key。假定你有若干电脑，你一会儿在公司提交，一会儿在家里提交，只要把每台电脑的Key都添加到GitHub，就可以在每台电脑上往GitHub推送了。</p>
<p>Github免费托管Git库，但是任何人都能看见，只有自己能修改。</p>
</blockquote>
<h5 id="添加远程库"><a href="#添加远程库" class="headerlink" title="添加远程库"></a>添加远程库</h5><ol>
<li><p>先在GitHub新建一个repository</p>
<img src="https://raw.githubusercontent.com/Guuhua/PicBed/master/imgdllwin10/image-20200506185609614.png" alt="image-20200506185609614"  />

<p>创建好之后，Github会提示你，可以创建一个新的仓库，也可以与现有的本地仓库关联</p>
<img src="https://raw.githubusercontent.com/Guuhua/PicBed/master/imgdllwin10/image-20200506190156336.png" alt="image-20200506190156336" style="zoom: 80%;" />



</li>
</ol>
<ol start="2">
<li><p>将本地仓库与GIthub关联，Guuhua需要换成自己的用户名</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin git@github.com:Guuhua/learngit.git</span><br></pre></td></tr></table></figure>

<p>其中origin就是远程库的名字，这是Git默认的叫法，可以修改</p>
</li>
<li><p>推送本地库的所有内容到远程库上</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ git push -u origin master</span><br><span class="line">Enumerating objects: 18, <span class="keyword">done</span>.</span><br><span class="line">Counting objects: 100% (18/18), <span class="keyword">done</span>.</span><br><span class="line">Delta compression using up to 8 threads</span><br><span class="line">Compressing objects: 100% (13/13), <span class="keyword">done</span>.</span><br><span class="line">Writing objects: 100% (18/18), 1.54 KiB | 525.00 KiB/s, <span class="keyword">done</span>.</span><br><span class="line">Total 18 (delta 3), reused 0 (delta 0), pack-reused 0</span><br><span class="line">remote: Resolving deltas: 100% (3/3), <span class="keyword">done</span>.</span><br><span class="line">To github.com:Guuhua/learngit.git</span><br><span class="line"> * [new branch]      master -&gt; master</span><br><span class="line">Branch <span class="string">'master'</span> <span class="built_in">set</span> up to track remote branch <span class="string">'master'</span> from <span class="string">'origin'</span>.</span><br></pre></td></tr></table></figure>

<p><code>git push</code>实际上是把当前分支<code>master</code>推送到远程</p>
<p>由于第一次推送<code>master</code>分支，加上<code>-u</code>参数，Git不但会把本地的<code>master</code>分支内容推送到远程新的<code>master</code>分支上，还会把本地的<code>master</code>分支和远程的<code>master</code>分支关联起来，在以后的推送或拉取时就可以简化命令为 <code>git push origin master</code></p>
</li>
</ol>
<h4 id="分支管理"><a href="#分支管理" class="headerlink" title="分支管理"></a>分支管理</h4><h5 id="创建与合并分支"><a href="#创建与合并分支" class="headerlink" title="创建与合并分支"></a>创建与合并分支</h5><p>每次提交，Git会把提交的版本串成一条时间线，这条时间线就是一个分支，截止到目前，只有一条时间线，在Git里这个分支叫主分支，即<code>master</code>分支。<code>HEAD</code>严格来说不是指向版本文件，而是指向<code>master</code>，而<code>master</code>才是指向提交的，所以，<code>HEAD</code>指向的就是当前分支。</p>
<p>一开始<code>master</code>分支是一条线，Git用<code>master</code>指向最新的提交，再用<code>HEAD</code>指向<code>master</code>，就能确定当前分支，以及当前分支的提交点</p>
<img src="https://raw.githubusercontent.com/Guuhua/PicBed/master/imgdllwin10/image-20200506223750801.png" alt="image-20200506223750801" style="zoom:50%;" />

<p>每次提交，<code>master</code>分支都会向前移动一步，随着不断的提交，<code>master</code>分支的线也越来越长。</p>
<p>当我们创建新的分支，例如<code>dev</code>时，Git新建了一个指针叫<code>dev</code>，指向<code>master</code>相同的提交，再把<code>HEAD</code>指向<code>dev</code>，就表示当前分支在<code>dev</code>上</p>
<img src="https://raw.githubusercontent.com/Guuhua/PicBed/master/imgdllwin10/image-20200506224115248.png" alt="image-20200506224115248" style="zoom:50%;" />

<p>这就是为什么Git创建一个分支很快的原因，Git只是增加了一个<code>dev</code>指针，改改<code>HEAD</code>的指向，工作区的文件都没有任何变化。</p>
<p>不过，从现在开始，对工作区的修改和提交就是针对<code>dev</code>分支了，比如新提交一次后，<code>dev</code>指针往前移动一步，而<code>master</code>指针不变：</p>
<img src="https://raw.githubusercontent.com/Guuhua/PicBed/master/imgdllwin10/image-20200506224431402.png" alt="image-20200506224431402" style="zoom:50%;" />

<p>假如我们在<code>dev</code>上的工作完成了，就可以把<code>dev</code>合并到<code>master</code>上。Git怎么合并呢？最简单的方法，就是直接把<code>master</code>指向<code>dev</code>的当前提交，就完成了合并</p>
<img src="https://raw.githubusercontent.com/Guuhua/PicBed/master/imgdllwin10/image-20200506224639518.png" alt="image-20200506224639518" style="zoom:50%;" />

<p>因此Git合并分支也很快</p>
<p>合并完分支后，甚至可以删除<code>dev</code>分支。删除<code>dev</code>分支就是把<code>dev</code>指针给删掉，删掉后，我们就剩下了一个<code>master</code>分支</p>
<img src="https://raw.githubusercontent.com/Guuhua/PicBed/master/imgdllwin10/image-20200506225219372.png" alt="image-20200506225219372" style="zoom:50%;" />

<p><strong>实战</strong></p>
<p>先创建<code>dev</code>分支，然后切换到<code>dev</code>分支</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -b dev</span><br><span class="line">Switched to a new branch <span class="string">'dev'</span></span><br></pre></td></tr></table></figure>

<p><code>git checkout</code>命令加上<code>-b</code>参数表示创建并切换，相当于以下两条命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git branch dev</span><br><span class="line">$ git checkout dev</span><br><span class="line">Switched to a new branch <span class="string">'dev'</span></span><br></pre></td></tr></table></figure>

<p>然后可以使用<code>git branch</code>命令查看当前分支，会列出所有分支，当前使用分支前面会加上一个*号</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git branch</span><br><span class="line">* dev</span><br><span class="line">  master</span><br></pre></td></tr></table></figure>

<p>这时对<code>readme</code>进行修改，再提交</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ cat readme.txt</span><br><span class="line">Hello Git!</span><br><span class="line">Let<span class="string">'s do it!</span></span><br><span class="line"><span class="string">Git has a mutable index called stage.</span></span><br><span class="line"><span class="string">Git tracks changes of files.</span></span><br><span class="line"><span class="string">How can we restore the file?</span></span><br><span class="line"><span class="string">Creating a new branch is quick.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$ git add readme.txt</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$ git commit -m "branch test"</span></span><br><span class="line"><span class="string">[dev 2d585c8] branch test</span></span><br><span class="line"><span class="string"> 1 file changed, 2 insertions(+), 1 deletion(-)</span></span><br></pre></td></tr></table></figure>

<p>完成<code>dev</code>分支的工作后，现在可以切换回<code>master</code>分支，可以发现刚刚做的变动消失了</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout master</span><br><span class="line">Switched to branch <span class="string">'master'</span></span><br><span class="line">Your branch is up to date with <span class="string">'origin/master'</span>.</span><br></pre></td></tr></table></figure>

<p>现在把dev分支的工作成果合并到master分支上</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git merge dev</span><br><span class="line">Updating 9341e91..2d585c8</span><br><span class="line">Fast-forward</span><br><span class="line"> readme.txt | 3 ++-</span><br><span class="line"> 1 file changed, 2 insertions(+), 1 deletion(-)</span><br></pre></td></tr></table></figure>

<p><code>git merge</code>命令用于合并指定分支到当前分支。合并后，再查看<code>readme.txt</code>的内容，就可以看到，和<code>dev</code>分支的最新提交是完全一样的</p>
<p>注意到上面的<code>Fast-forward</code>信息，Git告诉我们，这次合并是“快进模式”，也就是直接把<code>master</code>指向<code>dev</code>的当前提交，所以合并速度非常快</p>
<p>合并完成后，就可以放心地删除<code>dev</code>分支了</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git branch -d dev</span><br><span class="line">Deleted branch dev (was 2d585c8).</span><br></pre></td></tr></table></figure>

<p>因为创建、合并和删除分支非常的快，所以Git鼓励使用分支完成某个任务，合并后再删掉分支，这和直接再<code>master</code>分支上工作效果一致，但是过程更加的安全</p>
<p><strong>切换分支–switch</strong></p>
<p>我们注意到切换分支使用 <code>git checkout &lt;branch&gt;</code>，而撤销更改则是 <code>git checkout -- &lt;file&gt;</code></p>
<p>实际上，切换分支，用<code>switch</code>更科学，创建并切换新的<code>dev</code>分支如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git switch -c dev</span><br></pre></td></tr></table></figure>

<p>切换到已有分支<code>master</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git switch master</span><br></pre></td></tr></table></figure>

<h5 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h5><p>查看分支：<code>git branch</code></p>
<p>创建分支：<code>git branch &lt;name&gt;</code></p>
<p>切换分支：<code>git checkout &lt;name&gt;</code> or <code>git switch &lt;name&gt;</code></p>
<p>创建+切换分支：<code>git checkout -b &lt;name&gt;</code> or <code>git switch -c &lt;name&gt;</code></p>
<p>合并某分支到当前分支：<code>git merge &lt;name&gt;</code></p>
<p>删除分支：<code>git branch -d &lt;name&gt;</code></p>
<h4 id="解决冲突"><a href="#解决冲突" class="headerlink" title="解决冲突"></a>解决冲突</h4><ol>
<li>准备新的 <code>feature1</code> 分支，继续新分支的开发</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git switch -c feature1</span><br><span class="line">Switched to a new branch <span class="string">'feature1'</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>修改<code>readme.txt</code>最后一行，改为：</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Creating a new branch is quick &amp; simple.</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>在分支<code>feature1</code>提交，然后切换到<code>master</code>分支</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ git add readme.txt</span><br><span class="line"></span><br><span class="line">$ git commit -m <span class="string">"And simple"</span></span><br><span class="line">[feature1 09ab010] And simple</span><br><span class="line"> 1 file changed, 2 insertions(+), 1 deletion(-)</span><br><span class="line"> </span><br><span class="line">$ git switch master</span><br><span class="line">Switched to branch <span class="string">'master'</span></span><br><span class="line">Your branch is ahead of <span class="string">'origin/master'</span> by 1 commit.</span><br><span class="line">  (use <span class="string">"git push"</span> to publish your <span class="built_in">local</span> commits)</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>Git自动提示我们当前<code>master</code>分支比远程的<code>master</code>分支要超前一个提交</li>
</ol>
<p>在<code>master</code>分支上把<code>readme.txt</code>文件的最后一行改为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Creating a new branch is quick and simple.</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>提交：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git add readme.txt</span><br><span class="line"></span><br><span class="line">$ git commit -m <span class="string">"&amp; simple"</span></span><br><span class="line">[master 1e9acfc] &amp; simple</span><br><span class="line"> 1 file changed, 2 insertions(+), 1 deletion(-)</span><br></pre></td></tr></table></figure>

<ol start="6">
<li>现在，<code>master</code>分支和<code>feature1</code>分支各自都分别有新的提交，变成了这样：</li>
</ol>
<img src="https://raw.githubusercontent.com/Guuhua/PicBed/master/imgdllwin10/image-20200507135209915.png" alt="image-20200507135209915" style="zoom:50%;" />

<ol start="7">
<li>这种情况下，Git无法执行“快速合并”，只能试图把各自的修改合并起来，但这种合并就可能会有冲突，我们试试看：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git merge feature1</span><br><span class="line">Auto-merging readme.txt</span><br><span class="line">CONFLICT (content): Merge conflict <span class="keyword">in</span> readme.txt</span><br><span class="line">Automatic merge failed; fix conflicts and <span class="keyword">then</span> commit the result.</span><br></pre></td></tr></table></figure>

<ol start="8">
<li>冲突发生了，使用 <code>git status</code>也可以查看冲突，也可以直接查看readme内容：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Your branch is ahead of <span class="string">'origin/master'</span> by 5 commits.</span><br><span class="line">  (use <span class="string">"git push"</span> to publish your <span class="built_in">local</span> commits)</span><br><span class="line"></span><br><span class="line">You have unmerged paths.</span><br><span class="line">  (fix conflicts and run <span class="string">"git commit"</span>)</span><br><span class="line">  (use <span class="string">"git merge --abort"</span> to abort the merge)</span><br><span class="line"></span><br><span class="line">Unmerged paths:</span><br><span class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to mark resolution)</span><br><span class="line">        both modified:   readme.txt</span><br><span class="line"></span><br><span class="line">no changes added to commit (use <span class="string">"git add"</span> and/or <span class="string">"git commit -a"</span>)</span><br><span class="line"></span><br><span class="line">$ cat readme.txt</span><br><span class="line">Hello Git!</span><br><span class="line">Let<span class="string">'s do it!</span></span><br><span class="line"><span class="string">Git has a mutable index called stage.</span></span><br><span class="line"><span class="string">Git tracks changes of files.</span></span><br><span class="line"><span class="string">How can we restore the file?</span></span><br><span class="line"><span class="string">Creating a new branch is quick.</span></span><br><span class="line"><span class="string">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</span></span><br><span class="line"><span class="string">Creating a new branch is quick and simple.</span></span><br><span class="line"><span class="string">=======</span></span><br><span class="line"><span class="string">Creating a new branch is quick &amp; simple.</span></span><br><span class="line"><span class="string">&gt;&gt;&gt;&gt;&gt;&gt;&gt; feature1</span></span><br></pre></td></tr></table></figure>

<p>Git用<code>&lt;&lt;&lt;&lt;&lt;&lt;&lt;</code>，<code>=======</code>，<code>&gt;&gt;&gt;&gt;&gt;&gt;&gt;</code>标记出不同分支的内容，我们手动修改如下后保存：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Creating a new branch is qucik and simple.</span><br></pre></td></tr></table></figure>

<ol start="9">
<li>再次提交</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git add readme.txt</span><br><span class="line"></span><br><span class="line">$ git commit -m <span class="string">"confict fixed"</span></span><br><span class="line">[master df422bb] confict fixed</span><br></pre></td></tr></table></figure>

<img src="https://raw.githubusercontent.com/Guuhua/PicBed/master/imgdllwin10/image-20200507144532809.png" alt="image-20200507144532809" style="zoom:50%;" />

<ol start="10">
<li>使用 <code>git log</code>可以可能到分支的合并情况：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">log</span> --graph --pretty=oneline --abbrev-commit</span><br><span class="line">*   cf810e4 (HEAD -&gt; master) conflict fixed</span><br><span class="line">|\  </span><br><span class="line">| * 14096d0 (feature1) AND simple</span><br><span class="line">* | 5dc6824 &amp; simple</span><br><span class="line">|/  </span><br><span class="line">* b17d20e branch <span class="built_in">test</span></span><br><span class="line">* d46f35e (origin/master) remove test.txt</span><br><span class="line">* b84166e add test.txt</span><br><span class="line">* 519219b git tracks changes</span><br><span class="line">* e43a48b understand how stage works</span><br><span class="line">* 1094adb append GPL</span><br><span class="line">* e475afc add distributed</span><br><span class="line">* eaadf4e wrote a readme file</span><br></pre></td></tr></table></figure>

<ol start="11">
<li>最后，删除 <code>feature1</code></li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git branch -d feature1</span><br><span class="line">Deleted branch feature1 (was 1143f76).</span><br></pre></td></tr></table></figure>

<h5 id="小结-1"><a href="#小结-1" class="headerlink" title="小结"></a>小结</h5><p>当Git无法自动合并分支时，就必须手动解决冲突，解决冲突后，再提交，合并完成。</p>
<p>解决冲突就是把Git合并失败的文件手动编辑为我们希望的内容，再提交。</p>
<p>用<code>git log --graph</code>命令可以看到分支合并图。</p>
<h4 id="分支管理策略"><a href="#分支管理策略" class="headerlink" title="分支管理策略"></a>分支管理策略</h4><blockquote>
<p>通常，合并分支时，Git可能会用 <code>Fast forward</code>模式，但这种模式下，删除分支后，会丢掉分支信息。如果要强制禁用<code>Fast forward</code>模式，Git就会再merge生成一个新的commit，这样从分支历史就可以看出分支信息。</p>
</blockquote>
<h5 id="实战"><a href="#实战" class="headerlink" title="实战"></a>实战</h5><ol>
<li><p>首先创建并切换dev分支：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git switch -c dev</span><br><span class="line">Switched to a new branch <span class="string">'dev'</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>修改readme，并提交一个新的commit：</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">add</span> readme.txt</span><br><span class="line"></span><br><span class="line">$ git commit -<span class="keyword">m</span> <span class="string">"add merge"</span></span><br><span class="line">[dev <span class="number">3</span>d3a166] <span class="built_in">add</span> merge</span><br><span class="line"> <span class="number">1</span> <span class="keyword">file</span> changed, <span class="number">1</span> insertion(+)</span><br></pre></td></tr></table></figure>
</li>
<li><p>切换回<code>master</code>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git switch master</span><br><span class="line">Switched to branch <span class="string">'master'</span></span><br><span class="line">Your branch is ahead of <span class="string">'origin/master'</span> by 7 commits.</span><br><span class="line">  (use <span class="string">"git push"</span> to publish your <span class="built_in">local</span> commits)</span><br></pre></td></tr></table></figure>
</li>
<li><p>准备合并<code>dev</code>分支，请注意 <code>--no-ff</code>参数，表示禁用 <code>Fast forward</code>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git merge --no-ff -m <span class="string">"merge with no-ff"</span> dev</span><br><span class="line">Merge made by the <span class="string">'recursive'</span> strategy.</span><br><span class="line"> readme.txt | 1 +</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看分支历史：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">log</span> --graph --pretty=onelin --abbrev-commit</span><br><span class="line">*   bcb35a4 (HEAD -&gt; master) merge with no-ff</span><br><span class="line">|\</span><br><span class="line">| * 3d3a166 (dev) add merge</span><br><span class="line">|/</span><br><span class="line">*   df422bb (origin/master) confict fixed</span><br></pre></td></tr></table></figure>

<img src="https://raw.githubusercontent.com/Guuhua/PicBed/master/imgdllwin10/image-20200507150654708.png" alt="image-20200507150654708" style="zoom:50%;" />

<p>可以看到不使用 <code>Fast forward</code>模式，merge就像这样</p>
</li>
</ol>
<h5 id="分支策略"><a href="#分支策略" class="headerlink" title="分支策略"></a>分支策略</h5><p>实际开发中，我们应当按照几个基本原则进行分支管理：</p>
<ol>
<li><code>master</code>分支应该是非常稳定的，也就是仅用来发布新版本，平时不能在上面工作</li>
<li>工作应当在<code>dev</code>分支上，也就是说dev分支是不稳定的，到某个时候，比如1.0版本发布时，再把<code>dev</code>分支合并到<code>master</code>上，在<code>master</code>分支发布1.0版本</li>
</ol>
<p>所以，团队合作的分支看起来就像这样：</p>
<img src="https://raw.githubusercontent.com/Guuhua/PicBed/master/imgdllwin10/image-20200507151311367.png" alt="image-20200507151311367" style="zoom:67%;" />

<h5 id="小结-2"><a href="#小结-2" class="headerlink" title="小结"></a>小结</h5><p>Git分支十分强大，在团队开发中应该充分应用。</p>
<p>合并分支时，加上<code>--no-ff</code>参数就可以用普通模式合并，合并后的历史有分支，能看出来曾经做过合并，而<code>fast forward</code>合并就看不出来曾经做过合并。</p>
<h4 id="Bug分支"><a href="#Bug分支" class="headerlink" title="Bug分支"></a>Bug分支</h4><p>软件开发中，bug不可避免。有了bug当然就需要修复。在Git中，由于分支是如此的强大，所以，每个bug都可以通过一个新的临时分支来修复，修复后，合并分支，然后将临时分支删除。</p>
<p>当你接到一个修复一个代号101的bug的任务时，很自然地，你想创建一个分支<code>issue-101</code>来修复它，但是，等等，当前正在<code>dev</code>上进行的工作还没有提交：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch dev</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</span><br><span class="line"></span><br><span class="line">	new file:   hello.py</span><br><span class="line"></span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">"git checkout -- &lt;file&gt;..."</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line"></span><br><span class="line">	modified:   readme.txt</span><br></pre></td></tr></table></figure>

<p>这时工作进行到一半，还没有办法提交，预计完成还需要1天时间。但是，必须在两个小时内修复bug该怎么办？</p>
<p>可以用<code>stash</code>功能，把当前工作现场储藏起来，等以后恢复现场后继续工作：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git stash</span><br><span class="line">Saved working directory and index state WIP on dev: f52c633 add merge</span><br></pre></td></tr></table></figure>

<p>首先确定在哪个分支上修复bug，假如在<code>master</code>分支上修复，就从<code>master</code>创建临时分支：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git switch master</span><br><span class="line">Switched to branch <span class="string">'master'</span></span><br><span class="line">Your branch is ahead of <span class="string">'origin/master'</span> by 2 commits.</span><br><span class="line">  (use <span class="string">"git push"</span> to publish your <span class="built_in">local</span> commits)</span><br><span class="line"></span><br><span class="line">$ git switch -c issue-100</span><br><span class="line">Switched to a new branch <span class="string">'issue-100'</span></span><br></pre></td></tr></table></figure>

<p>现在修复bug，需要把“Git is free software …”改为“Git is a free software …”，然后提交：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git add readme.txt </span><br><span class="line">$ git commit -m <span class="string">"fix bug 101"</span></span><br><span class="line">[issue-101 4c805e2] fix bug 101</span><br><span class="line"> 1 file changed, 1 insertion(+), 1 deletion(-)</span><br></pre></td></tr></table></figure>

<p>修复完切换到<code>master</code>分支，并完成合并，最后删除<code>issue-100</code>分支：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git switch master</span><br><span class="line">Switched to branch <span class="string">'master'</span></span><br><span class="line">Your branch is ahead of <span class="string">'origin/master'</span> by 6 commits.</span><br><span class="line">  (use <span class="string">"git push"</span> to publish your <span class="built_in">local</span> commits)</span><br><span class="line"></span><br><span class="line">$ git merge --no-ff -m <span class="string">"merged bug fix 101"</span> issue-101</span><br><span class="line">Merge made by the <span class="string">'recursive'</span> strategy.</span><br><span class="line"> readme.txt | 2 +-</span><br><span class="line"> 1 file changed, 1 insertion(+), 1 deletion(-)</span><br></pre></td></tr></table></figure>

<p>完成之后，返回到<code>dev</code>分支工作，发现工作区clean，用<code>git stash list</code>命令查看</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch dev</span><br><span class="line">nothing to commit, working tree clean</span><br><span class="line"></span><br><span class="line">$ git stash list</span><br><span class="line">stash@&#123;0&#125;: WIP on dev: 3d3a166 add merge</span><br></pre></td></tr></table></figure>

<p>工作现场还在，Git把stash内容存在某个地方，需要恢复，有两个方法：</p>
<ol>
<li><code>git stash apply</code>：但是恢复之后，stash中的内容并不会删除，需要用<code>git stash drop</code>来删除</li>
<li><code>git stash pop</code>：恢复的同时把stash的内容也删除了</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git stash pop</span><br><span class="line">On branch dev</span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">"git restore &lt;file&gt;..."</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line">        modified:   readme.txt</span><br><span class="line"></span><br><span class="line">no changes added to commit (use <span class="string">"git add"</span> and/or <span class="string">"git commit -a"</span>)</span><br><span class="line">Dropped refs/stash@&#123;0&#125; (f91f37bc6e31377f4d5a895b1d52524629d80aef)</span><br></pre></td></tr></table></figure>

<p>允许多次stash，恢复的时候，先用<code>git stash list</code>查看，然后恢复指定的stash，用命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git stash apply stash@&#123;0&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Q2  虽然我们在master分支上修复了bug，但是dev分支上还是存在bug，那怎么在dev分支上修复同样的bug呢？</strong></p>
<p><strong>A1</strong>. 重复操作一次，再次提交</p>
<p><strong>A2</strong>. 同样的bug，要在dev上修复，我们只需要把<code>4c805e2 fix bug 101</code>这个提交所做的修改“复制”到dev分支。注意：我们只想复制<code>4c805e2 fix bug 101</code>这个提交所做的修改，并不是把整个master分支merge过来。为了方便操作，Git专门提供了一个<code>cherry-pick</code>命令，让我们能复制一个特定的提交到当前分支：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git branch</span><br><span class="line">* dev</span><br><span class="line">  master</span><br><span class="line">$ git cherry-pick 4c805e2</span><br><span class="line">[master 1d4b803] fix bug 101</span><br><span class="line"> 1 file changed, 1 insertion(+), 1 deletion(-)</span><br></pre></td></tr></table></figure>

<p>Git自动给dev分支做了一次提交，注意这次提交的commit是<code>1d4b803</code>，它并不同于master的<code>4c805e2</code>，因为这两个commit只是改动相同，但确实是两个不同的commit。用<code>git cherry-pick</code>，我们就不需要在dev分支上手动再把修bug的过程重复一遍。</p>
<h5 id="小结-3"><a href="#小结-3" class="headerlink" title="小结"></a>小结</h5><p>修复bug时，我们会通过创建新的bug分支进行修复，然后合并，最后删除</p>
<p>当工作进行到一半时，可以先用<code>git stash</code>，然后去修复bug，修复后，使用 <code>git stash pop</code></p>
<p>在master分支修复的bug，想要合并到当前分支，可以用<code>git cherry-pick &lt;commit&gt;</code>，把bug提交的修改”复制“到当前分支</p>
<h4 id="多人协作"><a href="#多人协作" class="headerlink" title="多人协作"></a>多人协作</h4><p>当你从远程仓库克隆时，实际上Git自动把本地的<code>master</code>分支和远程的<code>master</code>分支对应起来了，并且，远程仓库的默认名称是<code>origin</code></p>
<p>要查看远程库的信息，用<code>git remote</code>，详细信息 <code>git remote -v</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git remote</span><br><span class="line">origin</span><br><span class="line"></span><br><span class="line">$ git remote -v</span><br><span class="line">origin  git@github.com:Guuhua/learngit.git (fetch)</span><br><span class="line">origin  git@github.com:Guuhua/learngit.git (push)</span><br></pre></td></tr></table></figure>

<p>上面显示了可以抓取和推送的 <code>origin</code>  地址。如果没有推送权限，就看不到push的地址</p>
<h5 id="推送分支"><a href="#推送分支" class="headerlink" title="推送分支"></a>推送分支</h5><p>推送分支就是把该分支所有本地提交推送到远程库。推送时，要制定本地分支，这样，Git就会把该分支推送到远程库对应的远程分支上：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin master</span><br></pre></td></tr></table></figure>

<p>如果要推送其他分支，比如 <code>dev</code>，就改成：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin dev</span><br><span class="line">Enumerating objects: 6, <span class="keyword">done</span>.</span><br><span class="line">Counting objects: 100% (6/6), <span class="keyword">done</span>.</span><br><span class="line">Delta compression using up to 8 threads</span><br><span class="line">Compressing objects: 100% (3/3), <span class="keyword">done</span>.</span><br><span class="line">Writing objects: 100% (4/4), 374 bytes | 374.00 KiB/s, <span class="keyword">done</span>.</span><br><span class="line">Total 4 (delta 1), reused 0 (delta 0), pack-reused 0</span><br><span class="line">remote: Resolving deltas: 100% (1/1), completed with 1 <span class="built_in">local</span> object.</span><br><span class="line">remote:</span><br><span class="line">remote: Create a pull request <span class="keyword">for</span> <span class="string">'dev'</span> on GitHub by visiting:</span><br><span class="line">remote:      https://github.com/Guuhua/learngit/pull/new/dev</span><br><span class="line">remote:</span><br><span class="line">To github.com:Guuhua/learngit.git</span><br><span class="line"> * [new branch]      dev -&gt; dev</span><br></pre></td></tr></table></figure>

<p>但是，并不是一定要把本地分支往远程推送，那么，哪些分支需要推送，哪些不需要呢？</p>
<ul>
<li><code>master</code>分支是主分支，因此要时刻与远程同步；</li>
<li><code>dev</code>分支是开发分支，团队所有成员都需要在上面工作，所以也需要与远程同步；</li>
<li>bug分支只用于在本地修复bug，就没必要推到远程了，除非老板要看看你每周到底修复了几个bug；</li>
<li>feature分支是否推到远程，取决于你是否和你的小伙伴合作在上面开发。</li>
</ul>
<h5 id="抓取分支"><a href="#抓取分支" class="headerlink" title="抓取分支"></a>抓取分支</h5><p>多人协作时，大家都会往 <code>master</code> 和 <code>dev</code> 分支上推送各自的推送</p>
<p>现在，模拟一个你的小伙伴，可以在另一台电脑（注意要把SSH Key添加到GitHub）或者同一台电脑的另一个目录下克隆：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> &lt;repo&gt;</span><br><span class="line">// 克隆到指定目录</span><br><span class="line">git <span class="built_in">clone</span> &lt;repo&gt; &lt;directory&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> git@github.com:Guuhua/learngit.git</span><br><span class="line">Cloning into <span class="string">'learngit'</span>...</span><br><span class="line">remote: Enumerating objects: 41, <span class="keyword">done</span>.</span><br><span class="line">remote: Counting objects: 100% (41/41), <span class="keyword">done</span>.</span><br><span class="line">remote: Compressing objects: 100% (23/23), <span class="keyword">done</span>.</span><br><span class="line">remote: Total 41 (delta 14), reused 39 (delta 12), pack-reused 0</span><br><span class="line">Receiving objects: 100% (41/41), <span class="keyword">done</span>.</span><br><span class="line">Resolving deltas: 100% (14/14), <span class="keyword">done</span>.</span><br></pre></td></tr></table></figure>

<p>当你的小伙伴从远程库clone时，默认情况下，你的小伙伴只能看到本地的<code>master</code>分支。不信可以用<code>git branch</code>命令看看：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git branch</span><br><span class="line">* master</span><br></pre></td></tr></table></figure>

<p>现在，你的小伙伴要在<code>dev</code>分支上开发，就必须创建远程<code>origin</code>的<code>dev</code>分支到本地，于是他用这个命令创建本地<code>dev</code>分支：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -b dev origin/dev</span><br><span class="line">Switched to a new branch <span class="string">'dev'</span></span><br><span class="line">Branch <span class="string">'dev'</span> <span class="built_in">set</span> up to track remote branch <span class="string">'dev'</span> from <span class="string">'origin'</span>.</span><br></pre></td></tr></table></figure>

<p>现在，他就可以在<code>dev</code>上继续修改，然后，时不时地把<code>dev</code>分支<code>push</code>到远程：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">$ touch env.txt</span><br><span class="line"></span><br><span class="line">$ vim env.txt</span><br><span class="line"></span><br><span class="line">$ git add env.txt</span><br><span class="line">warning: LF will be replaced by CRLF <span class="keyword">in</span> env.txt.</span><br><span class="line">The file will have its original line endings <span class="keyword">in</span> your working directory</span><br><span class="line"></span><br><span class="line">$ git commit -m <span class="string">"add env"</span></span><br><span class="line">[dev 2f5488e] add env</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br><span class="line"> create mode 100644 env.txt</span><br><span class="line"></span><br><span class="line">$ git push origin dev</span><br><span class="line">Enumerating objects: 4, <span class="keyword">done</span>.</span><br><span class="line">Counting objects: 100% (4/4), <span class="keyword">done</span>.</span><br><span class="line">Delta compression using up to 8 threads</span><br><span class="line">Compressing objects: 100% (2/2), <span class="keyword">done</span>.</span><br><span class="line">Writing objects: 100% (3/3), 339 bytes | 339.00 KiB/s, <span class="keyword">done</span>.</span><br><span class="line">Total 3 (delta 0), reused 0 (delta 0), pack-reused 0</span><br><span class="line">To github.com:Guuhua/learngit.git</span><br><span class="line">   082abb1..2f5488e  dev -&gt; dev</span><br></pre></td></tr></table></figure>

<p>你的小伙伴已经向<code>origin/dev</code>分支推送了他的提交，而碰巧你也对同样的文件作了修改，并试图推送：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin dev</span><br><span class="line">To github.com:Guuhua/learngit.git</span><br><span class="line"> ! [rejected]        dev -&gt; dev (fetch first)</span><br><span class="line">error: failed to push some refs to <span class="string">'git@github.com:Guuhua/learngit.git'</span></span><br><span class="line">hint: Updates were rejected because the remote contains work that you <span class="keyword">do</span></span><br><span class="line">hint: not have locally. This is usually caused by another repository pushing</span><br><span class="line">hint: to the same ref. You may want to first integrate the remote changes</span><br><span class="line">hint: (e.g., <span class="string">'git pull ...'</span>) before pushing again.</span><br><span class="line">hint: See the <span class="string">'Note about fast-forwards'</span> <span class="keyword">in</span> <span class="string">'git push --help'</span> <span class="keyword">for</span> details.</span><br></pre></td></tr></table></figure>

<p>推送失败，因为你的小伙伴的最新提交和你试图推送的提交有冲突，解决办法也很简单，Git已经提示我们，先用<code>git pull</code>把最新的提交从<code>origin/dev</code>抓下来，然后，在本地合并，解决冲突，再推送：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ git pull</span><br><span class="line">There is no tracking information <span class="keyword">for</span> the current branch.</span><br><span class="line">Please specify <span class="built_in">which</span> branch you want to merge with.</span><br><span class="line">See git-pull(1) <span class="keyword">for</span> details.</span><br><span class="line"></span><br><span class="line">    git pull &lt;remote&gt; &lt;branch&gt;</span><br><span class="line"></span><br><span class="line">If you wish to <span class="built_in">set</span> tracking information <span class="keyword">for</span> this branch you can <span class="keyword">do</span> so with:</span><br><span class="line"></span><br><span class="line">    git branch --<span class="built_in">set</span>-upstream-to=origin/&lt;branch&gt; dev</span><br></pre></td></tr></table></figure>

<p><code>git pull</code>也失败了，原因是没有指定本地<code>dev</code>分支与远程<code>origin/dev</code>分支的链接，根据提示，设置<code>dev</code>和<code>origin/dev</code>的链接：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git branch --<span class="built_in">set</span>-upstream-to=origin/dev dev</span><br><span class="line">Branch <span class="string">'dev'</span> <span class="built_in">set</span> up to track remote branch <span class="string">'dev'</span> from <span class="string">'origin'</span>.</span><br><span class="line"></span><br><span class="line">$ git pull</span><br><span class="line">CONFLICT (add/add): Merge conflict <span class="keyword">in</span> env.txt</span><br><span class="line">Auto-merging env.txt</span><br><span class="line">Automatic merge failed; fix conflicts and <span class="keyword">then</span> commit the result.</span><br></pre></td></tr></table></figure>

<p>这回<code>git pull</code>成功，但是合并有冲突，需要手动解决，解决的方法和分支管理中的解决冲突完全一样。解决后，提交，再push：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ git add env.txt</span><br><span class="line"></span><br><span class="line">$ git commit -m <span class="string">"fix env confict"</span></span><br><span class="line">[dev a1efc07] fix env confict</span><br><span class="line"></span><br><span class="line">$ git push origin dev</span><br><span class="line">Enumerating objects: 7, <span class="keyword">done</span>.</span><br><span class="line">Counting objects: 100% (7/7), <span class="keyword">done</span>.</span><br><span class="line">Delta compression using up to 8 threads</span><br><span class="line">Compressing objects: 100% (3/3), <span class="keyword">done</span>.</span><br><span class="line">Writing objects: 100% (4/4), 456 bytes | 456.00 KiB/s, <span class="keyword">done</span>.</span><br><span class="line">Total 4 (delta 1), reused 0 (delta 0), pack-reused 0</span><br><span class="line">remote: Resolving deltas: 100% (1/1), <span class="keyword">done</span>.</span><br><span class="line">To github.com:Guuhua/learngit.git</span><br><span class="line">   2f5488e..a1efc07  dev -&gt; dev</span><br></pre></td></tr></table></figure>

<h5 id="工作模式"><a href="#工作模式" class="headerlink" title="工作模式"></a>工作模式</h5><p>多人协作的工作模式通常是这样：</p>
<ol>
<li>首先，可以试图用<code>git push origin</code>推送自己的修改；</li>
<li>如果推送失败，则因为远程分支比你的本地更新，需要先用<code>git pull</code>试图合并；</li>
<li>如果合并有冲突，则解决冲突，并在本地提交；</li>
<li>没有冲突或者解决掉冲突后，再用<code>git push origin</code>推送就能成功！</li>
</ol>
<p>如果<code>git pull</code>提示<code>no tracking information</code>，则说明本地分支和远程分支的链接关系没有创建，用命令<code>git branch --set-upstream-to  origin/</code>。</p>
<p>这就是多人协作的工作模式，一旦熟悉了，就非常简单。</p>
<h5 id="小结-4"><a href="#小结-4" class="headerlink" title="小结"></a>小结</h5><ul>
<li><p>查看远程信息：<code>git remote -v</code></p>
</li>
<li><p>本地新建的分支如果不推送到远程，对其他人就不可见</p>
</li>
<li><p>从本地推送分支，使用 <code>git push origin branch-name</code>，如果推送失败，先用<code>git pull</code>抓取远程的新提交</p>
</li>
<li><p>从本地创建和远程分支对应的分支，使用<code>git checkout -b branch-name origin/branch-name</code>，本地和远程分支的名称最好一致 （）</p>
</li>
<li><p>建立本地分支和远程分支的关联，使用<code>git branch --set-upstream branch-name origin/branch-name</code></p>
</li>
<li><p>从远程抓取分支，使用<code>git pull</code>，如果有冲突，要先处理冲突。</p>
</li>
</ul>
<h4 id="rebase"><a href="#rebase" class="headerlink" title="rebase"></a>rebase</h4><p>多人在同一个分支上协作时，很容易出现冲突。即使没有冲突，后push的童鞋不得不先pull，在本地合并，然后才能push成功。每次合并再push后，分支变成了这样：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">log</span> --graph --pretty=oneline --abbrev-commit</span><br><span class="line">* d1be385 (HEAD -&gt; master, origin/master) init hello</span><br><span class="line">*   e5e69f1 Merge branch <span class="string">'dev'</span></span><br><span class="line">|\  </span><br><span class="line">| *   57c53ab (origin/dev, dev) fix env conflict</span><br><span class="line">| |\  </span><br><span class="line">| | * 7a5e5dd add env</span><br><span class="line">| * | 7bd91f1 add new env</span><br><span class="line">| |/  </span><br><span class="line">* |   12a631b merged bug fix 101</span><br><span class="line">|\ \  </span><br><span class="line">| * | 4c805e2 fix bug 101</span><br><span class="line">|/ /  </span><br><span class="line">* |   e1e9c68 merge with no-ff</span><br><span class="line">|\ \  </span><br><span class="line">| |/  </span><br><span class="line">| * f52c633 add merge</span><br><span class="line">|/  </span><br><span class="line">*   cf810e4 conflict fixed</span><br></pre></td></tr></table></figure>

<p>总之看上去很乱，有强迫症的童鞋会问：为什么Git的提交历史不能是一条干净的直线？</p>
<p>其实是可以做到的！</p>
<p>Git有一种称为rebase的操作，有人把它翻译成“变基”。</p>
<p>在和远程分支同步后，我们对<code>hello.py</code>这个文件做了两次提交。用<code>git log</code>命令看看：</p>
<h4 id="标签管理"><a href="#标签管理" class="headerlink" title="标签管理"></a>标签管理</h4><p>发布一个版本时，通常在版本库中打一个标签（tag），这样，就唯一确定了打标签时刻的版本。将来无论什么时候，取某个标签的版本，就是把那个打标签的时刻的历史版本取出来。所以，标签也是版本库的一个快照。</p>
<p>Git的标签虽然是版本库的快照，但其实它就是指向某个commit的指针（跟分支很像对不对？但是分支可以移动，标签不能移动），所以，创建和删除标签都是瞬间完成的。</p>
<p>Git有commit，为什么还要引入tag？</p>
<p>“请把上周一的那个版本打包发布，commit号是6a5819e…”</p>
<p>“一串乱七八糟的数字不好找！”</p>
<p>如果换一个办法：</p>
<p>“请把上周一的那个版本打包发布，版本号是v1.2”</p>
<p>“好的，按照tag v1.2查找commit就行！”</p>
<p>所以，tag就是一个让人容易记住的有意义的名字，它跟某个commit绑在一起。</p>
<h5 id="创建标签"><a href="#创建标签" class="headerlink" title="创建标签"></a>创建标签</h5><p>在Git中打标签非常简单，首先，切换到需要打标签的分支上，然后，敲命令<code>git tag</code>就可以打一个新标签，可以用命令<code>git tag</code>查看所有标签：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git branch</span><br><span class="line">* dev</span><br><span class="line">  master</span><br><span class="line">$ git checkout master</span><br><span class="line">Switched to branch <span class="string">'master'</span></span><br><span class="line"></span><br><span class="line">$ git tag v1.0</span><br><span class="line">$ git tag</span><br><span class="line">V1.0</span><br></pre></td></tr></table></figure>

<p>默认标签是打在最新提交的commit上的。有时候，如果忘了打标签，比如，现在已经是周五了，但应该在周一打的标签没有打，怎么办？</p>
<p>方法是找到历史提交的commit id，然后打上就可以了：</p>
<p>比方说要对<code>add merge</code>这次提交打标签，它对应的commit id是<code>f52c633</code>，敲入命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git tag V0.9 f52c633</span><br><span class="line"></span><br><span class="line">$ git tag</span><br><span class="line">V0.9</span><br><span class="line">V1.0</span><br></pre></td></tr></table></figure>

<p>注意，标签不是按时间顺序列出，而是按字母排序的。可以用<code>git show &lt;tagname&gt;</code>查看标签信息：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$ git show V0.9</span><br><span class="line">commit 3d3a16663e8c739bfe4fcfb830f5aeae0e41266e (tag: V0.9)</span><br><span class="line">Author: Guhua &lt;ttscj_chen@foxmail.com&gt;</span><br><span class="line">Date:   Thu May 7 14:57:19 2020 +0800</span><br><span class="line"></span><br><span class="line">    add merge</span><br><span class="line"></span><br><span class="line">diff --git a/readme.txt b/readme.txt</span><br><span class="line">index 0d3216e..25818f4 100644</span><br><span class="line">--- a/readme.txt</span><br><span class="line">+++ b/readme.txt</span><br><span class="line">@@ -5,3 +5,4 @@ Git tracks changes of files.</span><br><span class="line"> How can we restore the file?</span><br><span class="line"> Creating a new branch is quick.</span><br><span class="line"> Creating a new branch is quick and simple.</span><br><span class="line">+Branch add merge.</span><br></pre></td></tr></table></figure>

<p>还可以创建带有说明的标签，用<code>-a</code>指定标签名，<code>-m</code>指定说明文字：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git tag -a v0.1 -m <span class="string">"version 0.1 released"</span> 1094adb</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：标签总是和某个commit挂钩。如果这个commit既出现在master分支，又出现在dev分支，那么在这两个分支上都可以看到这个标签。</p>
</blockquote>
<h6 id="小结-5"><a href="#小结-5" class="headerlink" title="小结"></a>小结</h6><ul>
<li>命令<code>git tag &lt;tagname&gt;</code>用于新建一个标签，默认为<code>HEAD</code>，也可以指定一个commit id；</li>
<li>命令<code>git tag -a &lt;tagname&gt;  -m &quot;blablabla...&quot;</code>可以指定标签信息；</li>
<li>命令<code>git tag</code>可以查看所有标签。</li>
</ul>
<h5 id="操作标签"><a href="#操作标签" class="headerlink" title="操作标签"></a>操作标签</h5><p>如果标签打错了，也可以删除：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git tag -d V1.0</span><br><span class="line">Deleted tag <span class="string">'V1.0'</span> (was bcb35a4)</span><br></pre></td></tr></table></figure>

<p>因为创建的标签都只存储在本地，不会自动推送到远程。所以，打错的标签可以在本地安全删除。</p>
<p>如果要推送某个标签到远程，使用命令<code>git push origin &lt;tagname&gt;</code>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin V1.0</span><br><span class="line">Enumerating objects: 1, <span class="keyword">done</span>.</span><br><span class="line">Counting objects: 100% (1/1), <span class="keyword">done</span>.</span><br><span class="line">Writing objects: 100% (1/1), 164 bytes | 164.00 KiB/s, <span class="keyword">done</span>.</span><br><span class="line">Total 1 (delta 0), reused 0 (delta 0), pack-reused 0</span><br><span class="line">To github.com:Guuhua/learngit.git</span><br><span class="line"> * [new tag]         V1.0 -&gt; V1.0</span><br></pre></td></tr></table></figure>

<p>或者，一次性推送全部尚未推送到远程的本地标签：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin --tags</span><br><span class="line">Total 0 (delta 0), reused 0 (delta 0), pack-reused 0</span><br><span class="line">To github.com:Guuhua/learngit.git</span><br><span class="line"> * [new tag]         V0.9 -&gt; V0.9</span><br></pre></td></tr></table></figure>

<p>如果标签已经推送到远程，要删除远程标签会比较麻烦，先从本地删除</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git tag -d V0.9</span><br><span class="line">Deleted tag <span class="string">'V0.9'</span> (was 3d3a166)</span><br></pre></td></tr></table></figure>

<p>然后从远程删除，删除命令也是push，格式如下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin :refs/tags/V0.9</span><br><span class="line">To github.com:Guuhua/learngit.git</span><br><span class="line"> - [deleted]         V0.9</span><br></pre></td></tr></table></figure>

<h6 id="小结-6"><a href="#小结-6" class="headerlink" title="小结"></a>小结</h6><ul>
<li>命令<code>git push origin &lt;tagname&gt;</code>可以推送一个本地标签；</li>
<li>命令<code>git push origin --tags</code>可以推送全部未推送过的本地标签；</li>
<li>命令<code>git tag -d &lt;tagname&gt;</code>可以删除一个本地标签；</li>
<li>命令<code>git push origin :refs/tags/&lt;tagname&gt;</code>可以删除一个远程标签。</li>
</ul>
<h4 id="使用GitHub"><a href="#使用GitHub" class="headerlink" title="使用GitHub"></a>使用GitHub</h4><p>我们一直用GitHub作为免费的远程仓库，如果是个人的开源项目，放到GitHub上是完全没有问题的。其实GitHub还是一个开源协作社区，通过GitHub，既可以让别人参与你的开源项目，也可以参与别人的开源项目。</p>
<p>在GitHub出现以前，开源项目开源容易，但让广大人民群众参与进来比较困难，因为要参与，就要提交代码，而给每个想提交代码的群众都开一个账号那是不现实的，因此，群众也仅限于报个bug，即使能改掉bug，也只能把diff文件用邮件发过去，很不方便。</p>
<p>但是在GitHub上，利用Git极其强大的克隆和分支功能，广大人民群众真正可以第一次自由参与各种开源项目了。</p>
<p>如何参与一个开源项目呢？比如人气极高的bootstrap项目，这是一个非常强大的CSS框架，你可以访问它的项目主页<a href="https://github.com/twbs/bootstrap，点“Fork”就在自己的账号下克隆了一个bootstrap仓库，然后，从自己的账号下clone：" target="_blank" rel="noopener">https://github.com/twbs/bootstrap，点“Fork”就在自己的账号下克隆了一个bootstrap仓库，然后，从自己的账号下clone：</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone git@github.com:michaelliao&#x2F;bootstrap.git</span><br></pre></td></tr></table></figure>

<p>一定要从自己的账号下clone仓库，这样你才能推送修改。如果从bootstrap的作者的仓库地址<code>git@github.com:twbs/bootstrap.git</code>克隆，因为没有权限，你将不能推送修改。</p>
<p>Bootstrap的官方仓库<code>twbs/bootstrap</code>、你在GitHub上克隆的仓库<code>my/bootstrap</code>，以及你自己克隆到本地电脑的仓库，他们的关系就像下图显示的那样：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">┌─ GitHub ────────────────────────────────────┐</span><br><span class="line">│                                             │</span><br><span class="line">│ ┌─────────────────┐     ┌─────────────────┐ │</span><br><span class="line">│ │ twbs&#x2F;bootstrap  │────&gt;│  my&#x2F;bootstrap   │ │</span><br><span class="line">│ └─────────────────┘     └─────────────────┘ │</span><br><span class="line">│                                  ▲          │</span><br><span class="line">└──────────────────────────────────┼──────────┘</span><br><span class="line">                                   ▼</span><br><span class="line">                          ┌─────────────────┐</span><br><span class="line">                          │ local&#x2F;bootstrap │</span><br><span class="line">                          └─────────────────┘</span><br></pre></td></tr></table></figure>

<p>如果你想修复bootstrap的一个bug，或者新增一个功能，立刻就可以开始干活，干完后，往自己的仓库推送。</p>
<p>如果你希望bootstrap的官方库能接受你的修改，你就可以在GitHub上发起一个pull request。当然，对方是否接受你的pull request就不一定了。</p>
<p>如果你没能力修改bootstrap，但又想要试一把pull request，那就Fork一下我的仓库：<a href="https://github.com/michaelliao/learngit，创建一个`your-github-id.txt`的文本文件，写点自己学习Git的心得，然后推送一个pull" target="_blank" rel="noopener">https://github.com/michaelliao/learngit，创建一个`your-github-id.txt`的文本文件，写点自己学习Git的心得，然后推送一个pull</a> request给我，我会视心情而定是否接受。</p>
<h5 id="小结-7"><a href="#小结-7" class="headerlink" title="小结"></a>小结</h5><ul>
<li>在GitHub上，可以任意Fork开源仓库；</li>
<li>自己拥有Fork后的仓库的读写权限；</li>
<li>可以推送pull request给官方仓库来贡献代码。</li>
</ul>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Git/" rel="tag"># Git</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/05/08/hello-world/" rel="next" title="Hello World">
                <i class="fa fa-chevron-left"></i> Hello World
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
    </div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="http://img0.imgtn.bdimg.com/it/u=2491561979,272135239&fm=11&gp=0.jpg"
                alt="Juntao" />
            
              <p class="site-author-name" itemprop="name">Juntao</p>
              <p class="site-description motion-element" itemprop="description">Thought is already is late, exactly is the earliest time.</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%20%7C%7C%20archive">
              
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/Guuhua" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="Juntao:ttscj_chen(At)foxmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#Git"><span class="nav-number">1.</span> <span class="nav-text">Git</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#简介"><span class="nav-number">1.1.</span> <span class="nav-text">简介</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#集中式vs分布式"><span class="nav-number">1.1.1.</span> <span class="nav-text">集中式vs分布式</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#安装Git"><span class="nav-number">1.2.</span> <span class="nav-text">安装Git</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Linux"><span class="nav-number">1.2.1.</span> <span class="nav-text">Linux</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Win"><span class="nav-number">1.2.2.</span> <span class="nav-text">Win</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#用户信息"><span class="nav-number">1.2.3.</span> <span class="nav-text">用户信息</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#文本编辑器"><span class="nav-number">1.2.4.</span> <span class="nav-text">文本编辑器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#差异分析工具"><span class="nav-number">1.2.5.</span> <span class="nav-text">差异分析工具</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#查看配置信息"><span class="nav-number">1.2.6.</span> <span class="nav-text">查看配置信息</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#创建版本库"><span class="nav-number">1.3.</span> <span class="nav-text">创建版本库</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#步骤"><span class="nav-number">1.3.1.</span> <span class="nav-text">步骤</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#工作区、暂存区和版本库"><span class="nav-number">1.3.2.</span> <span class="nav-text">工作区、暂存区和版本库</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#暂存区-（stage-index）"><span class="nav-number">1.3.3.</span> <span class="nav-text">暂存区 （stage&#x2F;index）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#还原文档"><span class="nav-number">1.3.4.</span> <span class="nav-text">还原文档</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#删除文档"><span class="nav-number">1.3.5.</span> <span class="nav-text">删除文档</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#远程仓库"><span class="nav-number">1.4.</span> <span class="nav-text">远程仓库</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#SSH-keys配置"><span class="nav-number">1.4.1.</span> <span class="nav-text">SSH keys配置</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#添加远程库"><span class="nav-number">1.4.2.</span> <span class="nav-text">添加远程库</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#分支管理"><span class="nav-number">1.5.</span> <span class="nav-text">分支管理</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#创建与合并分支"><span class="nav-number">1.5.1.</span> <span class="nav-text">创建与合并分支</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#小结"><span class="nav-number">1.5.2.</span> <span class="nav-text">小结</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#解决冲突"><span class="nav-number">1.6.</span> <span class="nav-text">解决冲突</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#小结-1"><span class="nav-number">1.6.1.</span> <span class="nav-text">小结</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#分支管理策略"><span class="nav-number">1.7.</span> <span class="nav-text">分支管理策略</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#实战"><span class="nav-number">1.7.1.</span> <span class="nav-text">实战</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#分支策略"><span class="nav-number">1.7.2.</span> <span class="nav-text">分支策略</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#小结-2"><span class="nav-number">1.7.3.</span> <span class="nav-text">小结</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Bug分支"><span class="nav-number">1.8.</span> <span class="nav-text">Bug分支</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#小结-3"><span class="nav-number">1.8.1.</span> <span class="nav-text">小结</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#多人协作"><span class="nav-number">1.9.</span> <span class="nav-text">多人协作</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#推送分支"><span class="nav-number">1.9.1.</span> <span class="nav-text">推送分支</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#抓取分支"><span class="nav-number">1.9.2.</span> <span class="nav-text">抓取分支</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#工作模式"><span class="nav-number">1.9.3.</span> <span class="nav-text">工作模式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#小结-4"><span class="nav-number">1.9.4.</span> <span class="nav-text">小结</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#rebase"><span class="nav-number">1.10.</span> <span class="nav-text">rebase</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#标签管理"><span class="nav-number">1.11.</span> <span class="nav-text">标签管理</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#创建标签"><span class="nav-number">1.11.1.</span> <span class="nav-text">创建标签</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#小结-5"><span class="nav-number">1.11.1.1.</span> <span class="nav-text">小结</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#操作标签"><span class="nav-number">1.11.2.</span> <span class="nav-text">操作标签</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#小结-6"><span class="nav-number">1.11.2.1.</span> <span class="nav-text">小结</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#使用GitHub"><span class="nav-number">1.12.</span> <span class="nav-text">使用GitHub</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#小结-7"><span class="nav-number">1.12.1.</span> <span class="nav-text">小结</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Juntao</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  










  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'mHIU3owqPhxlxcpnzwm1yPg8-gzGzoHsz',
        appKey: 'szSfYv1e2o6npMHoHg4vUtfw',
        placeholder: 'Just go go',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("mHIU3owqPhxlxcpnzwm1yPg8-gzGzoHsz", "szSfYv1e2o6npMHoHg4vUtfw");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  
  

  

  

  

</body>
</html>
